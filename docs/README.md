# 📚 简记账 iOS App 技术文档

## 文档概览

本文档集为简记账 iOS App 提供了完整的技术架构、开发指南和使用说明。

---

## 📋 文档目录

### 🏗️ 架构与设计

#### [技术架构设计](./技术架构设计.md)
**核心内容**：
- ✅ 技术栈选型（SwiftUI + SwiftData + CloudKit）
- ✅ MVVM 架构模式详解
- ✅ 完整项目文件结构
- ✅ 依赖管理与性能指标
- ✅ 安全性与可扩展性设计

**适用场景**：了解整体技术方案

---

#### [数据模型设计](./数据模型设计.md)
**核心内容**：
- ✅ 完整的 SwiftData 实体定义（6个核心模型）
- ✅ ER图与关系映射
- ✅ 业务逻辑方法实现
- ✅ 数据迁移与查询优化

**关键模型**：
- `Ledger`（账本）
- `Account`（账户，含7种类型）
- `Category`（分类，双层级）
- `Transaction`（流水，含4种类型）
- `Budget`（预算，含结转逻辑）
- `Tag`（标签）

**适用场景**：实现数据层时参考

---

#### [UI设计指南](./UI设计指南.md)
**核心内容**：
- 🎨 现代毛玻璃风格
- 🔢 大号等宽数字显示
- 📐 圆形分类图标系统
- 🎯 触觉反馈规范
- 🌗 Dark Mode 适配

**设计亮点**：
- 半透明卡片 + 精美背景图片
- iOS 原生 Material 效果
- 统一的颜色系统

**适用场景**：UI 开发时保持一致性

---

#### [业务逻辑实现](./业务逻辑实现.md)
**核心内容**：
- ✅ 4种交易类型处理（支出/收入/转账/调整）
- ✅ 转账逻辑（不计入收支）
- ✅ 信用卡管理（账单日/还款日/额度计算）
- ✅ 预算计算逻辑
- ✅ 数据统计算法

**适用场景**：实现核心业务逻辑时必读

---

### 🔧 开发指南

#### [编译指南](./编译指南.md)
**核心内容**：
- 🛠️ 开发环境准备
- 📦 依赖管理
- 🔨 编译配置
- 🐛 常见问题解决

**适用场景**：项目初始化和编译

---

#### [开发实施手册](./开发实施手册.md)
**核心内容**：
- ✅ 开发环境准备
- ✅ 代码规范（命名/格式/注释）
- ✅ Git 工作流
- ✅ 测试策略

**适用场景**：项目管理与日常开发规范

---

#### [测试指南](./测试指南.md)
**核心内容**：
- 🧪 单元测试
- 🔄 集成测试
- 📱 UI测试
- 📊 测试覆盖率

**测试统计**：
- 131+ 个测试用例
- 88 个数据模型测试
- 25 个集成测试
- 8 个 UI 流程测试

**适用场景**：编写和运行测试

---

### 🌐 集成功能

#### [CloudKit集成指南](./CloudKit集成指南.md)
**核心内容**：
- ☁️ CloudKit 配置
- 🔄 数据同步方案
- 🐛 常见问题排查
- ✅ v6 版本修复说明

**同步特性**：
- 自动同步（SwiftData 内置）
- 离线可用（本地优先）
- 多设备实时同步
- 用户数据完全隐私

**适用场景**：实现 iCloud 同步

---

#### [小组件开发指南](./小组件开发指南.md)
**核心内容**：
- 📊 3种尺寸 Widget（Small/Medium/Large）
- 🔄 TimelineProvider 实现
- 📦 App Group 数据共享
- ✅ 预算使用率计算修复
- 🎨 分类图标显示修复

**Widget类型**：
- **Small**: 今日支出
- **Medium**: 今日支出 + 最近流水
- **Large**: 完整视图 + 快捷记账按钮

**适用场景**：实现 Widget 扩展

---

#### [Siri集成指南](./Siri集成指南.md)
**核心内容**：
- 🎤 App Intents 实现
- 🔧 Siri 权限配置
- 🐛 常见问题修复
- ✅ App Group ID 配置

**支持的Intent**：
- AddExpenseIntent（添加支出）
- GetTodayExpenseIntent（查询今日支出）
- GetBudgetIntent（查询预算）

**适用场景**：实现 Siri 快捷指令

---

#### [订阅功能指南](./订阅功能指南.md)
**核心内容**：
- 💰 StoreKit 2 集成
- 🔄 订阅管理
- 🧪 沙盒测试
- 📊 订阅状态显示

**订阅周期**：
- 沙盒环境：1年 = 1小时
- 真实环境：完整订阅周期

**适用场景**：实现和测试订阅功能

---

### 🚀 部署与发布

#### [真机部署指南](./真机部署指南.md)
**核心内容**：
- 📱 真机配置
- 🔒 证书和描述文件
- 🐛 常见问题解决
- ✅ App 图标显示修复

**常见问题**：
- App 图标不显示
- Siri 搜索不到 App
- CloudKit 同步失败

**适用场景**：真机测试和调试

---

#### [App发布指南](./App发布指南.md)
**核心内容**：
- 📝 准备工作
- 🔐 证书配置
- 📦 构建和上传
- 📋 审核材料准备
- 🎯 提交审核流程

**必需文件**：
- 隐私政策（privacy-policy.html）
- PrivacyInfo.xcprivacy
- 截图和预览视频
- 审核说明

**适用场景**：发布到 App Store

---

### 📄 其他资源

#### [隐私政策](./privacy-policy.html)
完整的隐私政策 HTML 页面，符合 App Store 审核要求。

#### [App图标](./app_icon/)
包含标准、Dark Mode 和 Tinted 版本的 App 图标。

---

## 🚀 快速开始

### 新手入门路径

```
1. 阅读《编译指南》→ 搭建开发环境
2. 阅读《技术架构设计》→ 了解整体方案
3. 阅读《数据模型设计》→ 理解数据结构
4. 参考各专项文档 → 开发具体功能
```

### 按开发任务使用

#### 📱 初始化项目
必读：
- 编译指南
- 开发实施手册

#### 💻 开发核心功能
必读：
- 技术架构设计
- 数据模型设计
- 业务逻辑实现
- UI设计指南

#### 🔌 集成功能
参考：
- CloudKit集成指南
- 小组件开发指南
- Siri集成指南
- 订阅功能指南

#### 🐛 调试问题
参考：
- 真机部署指南
- CloudKit集成指南
- 测试指南

#### 🚀 发布应用
必读：
- App发布指南
- 真机部署指南

---

## 📊 项目统计

| 项目 | 数值 |
|-----|------|
| 文档数量 | 17篇 |
| 核心功能 | 30+ |
| 测试用例 | 131+ |
| 支持设备 | iPhone & iPad |
| 最低系统 | iOS 17.0+ |

---

## 🛠️ 技术栈总览

```swift
// UI层
SwiftUI (iOS 17.0+)
Swift Charts
WidgetKit

// 数据层
SwiftData (本地持久化)
CloudKit (云同步)

// 功能集成
StoreKit 2 (订阅)
SiriKit (快捷指令)

// 架构
MVVM + Repository Pattern
Swift Concurrency (async/await)

// 工具
Xcode 15.0+
SwiftLint
Instruments (性能分析)
```

---

## 📝 文档更新历史

### v2.0 (2026-02-01)
- 🗂️ 整理文档结构，删除重复文档
- 📝 统一文档命名规范
- ✅ 合并相似主题的文档
- 📚 更新文档索引

### v1.0 (2026-01-24)
- ✅ 创建完整的技术文档
- ✅ 涵盖从架构设计到开发实施的全流程
- ✅ 提供100+代码示例
- ✅ 包含详细的UI/UX设计规范

---

## 🤝 使用指南

### 在 Cursor 中使用

1. **搜索功能**：使用 Cursor 的文件搜索快速定位内容
2. **代码补全**：将文档中的代码示例作为参考
3. **AI 辅助**：向 Cursor AI 提问时引用相关文档

### 示例 Prompt

```
@docs/数据模型设计.md
请帮我实现 Transaction 模型，参考文档中的设计
```

```
@docs/CloudKit集成指南.md
CloudKit 同步失败，帮我排查问题
```

```
@docs/真机部署指南.md
真机上 App 图标不显示，如何解决？
```

---

## ⚠️ 重要提示

1. **文档同步**：代码实现后及时更新文档
2. **版本控制**：文档随项目版本同步维护
3. **团队协作**：确保团队成员都阅读相关文档
4. **持续改进**：根据开发反馈优化文档

---

## 🎯 联系方式

- **Email**: ailehuoquan@163.com
- **GitHub**: https://github.com/harrysxu/jizhang_ios

---

**创建日期**: 2026-01-24  
**最后更新**: 2026-02-01

**祝开发顺利！🚀**
